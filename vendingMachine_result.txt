//////////////////////////////////////////////////////////////////////////////////////////////////////////////
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ V1 SEPOLIA\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

$ npm run deploy:sepolia

> vending-machine-v1@1.0.0 deploy:sepolia
> hardhat run scripts/deploy.js --network sepolia

ğŸš€ DÃ©ploiement du VendingMachine V1...
ğŸ“š ProductLibrary dÃ©ployÃ©e Ã : 0x7A6B53EDd630A75e60D74412552B237faAB5933d
ğŸª VendingMachine V1 (Proxy) dÃ©ployÃ© Ã : 0x0eBc275C9167DB23958245E77AeA7B43fFa969B5
ğŸ“ Adresses sauvegardÃ©es dans deployed-addresses.json

//////////////////////////////////////////////////////////////////////////////////////////////////////////////
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ V2 SEPOLIA\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

33645@DESKTOP-M85U4MN MINGW64 /c/_Felix/formations/myVendingMachine (main)
$ npx hardhat run scripts/deploy-v2.js --network sepolia
ğŸš€ Upgrading VendingMachine V1 to V2...
ğŸ“‹ Loaded existing deployment: {
  productLibrary: '0x7A6B53EDd630A75e60D74412552B237faAB5933d',
  vendingMachineProxy: '0x0eBc275C9167DB23958245E77AeA7B43fFa969B5',
  network: 'sepolia',
  chainId: 11155111,
  deployedAt: '2025-09-08T12:00:00.000Z'
}
ğŸ” Existing proxy address: 0x0eBc275C9167DB23958245E77AeA7B43fFa969B5
ğŸ­ Getting contract factories...
ğŸ“¥ Registering existing proxy with OpenZeppelin...
âœ… Proxy successfully registered
â¬†ï¸  Upgrading proxy to V2 implementation...
âœ… Upgrade completed! Proxy still at: 0x0eBc275C9167DB23958245E77AeA7B43fFa969B5
ğŸ”§ Initializing V2 storage...
âœ… V2 initialization completed
ğŸ” Verifying upgrade...
ğŸ“Š Contract version: 2.0.0
ğŸ“ˆ Total sales recorded: 0
ğŸ“Š Analytics Summary:
  - Total Sales: 0
  - Total Revenue: 0.01 ETH
  - Total Products: 10
  - Contract Balance: 0.01 ETH
ğŸ›ï¸  Products preserved:  10
ğŸ’¾ Updated addresses saved to deployed-addresses.json
ğŸ“‹ Updated addresses copied to frontend/public/

ğŸ‰ VendingMachine V2 Upgrade Completed Successfully!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Proxy Address (UNCHANGED): 0x0eBc275C9167DB23958245E77AeA7B43fFa969B5
âœ… New V2 Implementation: 0x9846894DF6DD9B20832fE489757214eCD61a50ff
âœ… All V1 data preserved
âœ… New V2 features available

ğŸ“± Your frontend will automatically use V2 features!

ğŸ‘‘ Admin Access:
  - Deployer Address: 0xf350B91b403ced3c6E68d34C13eBdaaE3bbd4E01
  - Has Admin Access: âœ… YES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•




//////////////////////////////////////////////////////////////////////////////////////////////////////////////
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\   V1 LOCAL \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

$ npm run deploy:local

ğŸš€ DÃ©ploiement du VendingMachine V1...
ğŸ“š ProductLibrary dÃ©ployÃ©e Ã : 0x5FbDB2315678afecb367f032d93F642f64180aa3
ğŸª VendingMachine V1 (Proxy) dÃ©ployÃ© Ã : 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
ğŸ“ Adresses sauvegardÃ©es dans deployed-addresses.json
ğŸ“‹ Adresses copiÃ©es vers frontend/public/deployed-addresses.json

//////////////////////////////////////////////////////////////////////////////////////////////////////////////
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\   V2 LOCAL \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

$ npx hardhat run scripts/deploy-v2.js --network localhost
ğŸš€ Upgrading VendingMachine V1 to V2...
ğŸ“‹ Loaded existing deployment: {
  productLibrary: '0x5FbDB2315678afecb367f032d93F642f64180aa3',
  vendingMachineProxy: '0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0',
  network: 'localhost',
  chainId: 31337,
  deployedAt: '2025-09-08T12:23:10.650Z'
}
ğŸ” Existing proxy address: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
ğŸ­ Getting VendingMachineV2 factory...
â¬†ï¸  Upgrading proxy to V2 implementation...
âœ… Upgrade completed! Proxy still at: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
ğŸ”§ Initializing V2 storage...
âœ… V2 initialization completed
ğŸ“Š Contract version: 2.0.0
ğŸ“ˆ Total sales recorded: 0
ğŸ“Š Analytics Summary:
  - Total Sales: 0
  - Total Revenue: 0.0 ETH
  - Total Products: 10
  - Contract Balance: 0.0 ETH
ğŸ’¾ Updated addresses saved to deployed-addresses.json
ğŸ“‹ Updated addresses copied to frontend/public/deployed-addresses.json

ğŸ‰ VendingMachine V2 Upgrade Completed Successfully!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Proxy Address (UNCHANGED): 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
âœ… New Implementation: 0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82
âœ… All V1 data preserved (products, balances)
âœ… New V2 features available (admin interface, analytics)

ğŸ”„ No frontend changes needed - same contract address!
ğŸ“± The DApp will automatically use V2 features

ğŸ‘‘ Admin Access:
  - Deployer Address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
  - Has Admin Access: âœ… YES
  - You can access the admin interface in the DApp
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” Verifying V2 upgrade...
âœ… Version check passed: 2.0.0
âœ… Analytics function accessible
âœ… Admin verification function working
âœ… V1 compatibility maintained - products: 10
ğŸ‰ All V2 functions verified successfully!